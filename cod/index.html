<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Alta Precisão - NEUROPSICOCENTRO</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container no-print">
        <header class="main-header">
            <h1>GESTÃO DE ESTOQUE</h1>
            <p>NEUROPSICOCENTRO - Controle de Ativos e Insumos</p>
            
            <nav class="main-nav">
                <button id="btn-tab-estoque" class="nav-btn active" onclick="trocarAba(event, 'aba-estoque')">Inventário</button>
                <button id="btn-tab-movimentacao" class="nav-btn" onclick="trocarAba(event, 'aba-movimentacao')">Movimentar</button>
                <button id="btn-tab-historico" class="nav-btn" onclick="trocarAba(event, 'aba-historico')">Auditoria</button>
                <button class="nav-btn btn-backup" onclick="exportarBackup()">Exportar Dados</button>
                <button class="nav-btn print-trigger" onclick="prepararImpressao()">Relatório</button>
            </nav>
        </header>

        <main id="aba-estoque" class="tab-content active">
            <section class="card">
                <h3>Cadastrar Item</h3>
                <form id="form-estoque">
                    <input type="hidden" id="edit-index">
                    <div class="grid-form">
                        <input type="text" id="item-sku" placeholder="SKU/Código Único" required>
                        <select id="unidade" required>
                            <option value="">Unidade</option>
                            <option value="MATRIZ">MATRIZ</option>
                            <option value="LIFE">LIFE</option>
                            <option value="SUL">SUL</option>
                        </select>
                        <select id="grupo" onchange="atualizarSubgrupos()" required>
                            <option value="">Grupo</option>
                            <option value="Imobilizado">Imobilizado</option>
                            <option value="Limpeza">Materiais de Limpeza</option>
                        </select>
                        <select id="subgrupo" required><option value="">Subgrupo</option></select>
                        <input type="text" id="item-nome" placeholder="Descrição do Item" required>
                        <input type="number" id="item-qtd" placeholder="Qtd Inicial" min="0" required>
                        <input type="number" id="item-min" placeholder="Estoque Mínimo" min="0" required>
                        <input type="number" id="item-preco" placeholder="Preço Unitário (R$)" step="0.01" min="0" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-save">Salvar no Sistema</button>
                        <button type="button" class="btn btn-cancel" onclick="limparFormulario()">Limpar</button>
                    </div>
                </form>
            </section>

            <section class="card">
                <div class="grid-filtros">
                    <select id="filtro-unidade" onchange="renderizarTabela()">
                        <option value="TODAS">Ver Todas as Unidades</option>
                        <option value="MATRIZ">MATRIZ</option>
                        <option value="LIFE">LIFE</option>
                        <option value="SUL">SUL</option>
                    </select>
                    <input type="text" id="busca-estoque" placeholder="Pesquisar por SKU ou Nome..." onkeyup="renderizarTabela()">
                </div>
                <div id="resumo-financeiro"></div>
            </section>

            <div class="tabela-wrapper">
                <table class="tabela-estilizada">
                    <thead>
                        <tr>
                            <th>Unidade / SKU</th>
                            <th>Categoria</th>
                            <th>Item</th>
                            <th>Status / Saldo</th>
                            <th>Financeiro</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="corpo-tabela"></tbody>
                </table>
            </div>
        </main>

        <div id="aba-movimentacao" class="tab-content">
            <section class="card">
                <h3>Lançar Entrada ou Saída</h3>
                <form id="form-movimentacao">
                    <div class="grid-form">
                        <select id="mov-unidade-filtro" onchange="popularSelectItens()">
                            <option value="">Selecione a Unidade...</option>
                            <option value="MATRIZ">MATRIZ</option>
                            <option value="LIFE">LIFE</option>
                            <option value="SUL">SUL</option>
                        </select>
                        <select id="mov-item" required><option value="">Selecione o Item...</option></select>
                        <select id="mov-tipo" required>
                            <option value="entrada">Entrada (+)</option>
                            <option value="saida">Saída (-)</option>
                        </select>
                        <input type="number" id="mov-qtd" placeholder="Quantidade" min="1" required>
                        <select id="mov-motivo" required>
                            <option value="">Motivo...</option>
                            <option value="Compra">Compra/Reposição</option>
                            <option value="Uso Interno">Uso Interno</option>
                            <option value="Ajuste">Ajuste de Inventário</option>
                            <option value="Avaria">Avaria/Vencimento</option>
                        </select>
                        <input type="text" id="mov-usuario" placeholder="Responsável" required>
                    </div>
                    <button type="submit" class="btn btn-mov">Confirmar Movimentação</button>
                </form>
            </section>
        </div>

        <div id="aba-historico" class="tab-content">
            <section class="card">
                <h3>Log de Auditoria</h3>
                <table class="tabela-estilizada">
                    <thead>
                        <tr>
                            <th>Data/Hora</th>
                            <th>Unidade</th>
                            <th>Item (SKU)</th>
                            <th>Operação</th>
                            <th>Responsável</th>
                            <th>Rastreio</th>
                        </tr>
                    </thead>
                    <tbody id="corpo-historico"></tbody>
                </table>
            </section>
        </div>
    </div>

    <div id="area-impressao" class="print-only"></div>
    <div id="toast-msg" class="toast"></div>

    <script src="script.js"></script>
</body>
</html>